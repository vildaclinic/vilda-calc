/* sidebar.css
 * Izolowane style dla menu w bocznym pasku (tylko desktop).
 * Nie nadpisują wyglądu menu hamburgerowego w nagłówku.
 */

/* Domyślnie (mobile / tablet) sidebar jest ukryty */
.sidebar {
  display: none;
}

/* Desktop ≥ 992 px */
@media (min-width: 992px) {
  /* Dwukolumnowy układ: po lewej sidebar, po prawej treść */
  .desktop-layout {
      display: grid;
      grid-template-columns: 260px 1fr;
      gap: 0.5rem;
      align-items: stretch;
      /* rozciągnij elementy siatki na pełną wysokość wiersza */
      flex: 1 0 auto;
      /* ten kontener rośnie, żeby zająć „środek” strony */
    }

  /* Ukrywamy poziome menu w nagłówku – na desktopie korzystamy z sidebara */
  header .main-nav {
    display: none;
  }

  /* Pokazujemy i stylujemy sam box sidebara */
    .sidebar {
      display: block;
      background: var(--card);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 1rem 0;
      height: 100%;
      /* wypełnij cały wiersz gridu (od góry do dołu .desktop-layout) */
    }

  /* Kontener z treścią po prawej */
    .main-content .container {
      max-width: none;
      margin: 0;
      padding: 1rem 0.5rem;
    }

  /* Nawigacja w sidebarze – w pełni niezależna od .main-nav */
  .sidebar-nav {
    padding: 0;
    margin: 0;
  }

  .sidebar-nav ul {
    list-style: none;
    margin: 0;
    padding: 0;
    display: flex;
    flex-direction: column;
  }

  .sidebar-nav li {
    margin: 0;
  }

  .sidebar-nav a {
    display: flex;
    /* ikona + tekst obok siebie */
    align-items: center;
    /* pionowe wyśrodkowanie ikonki i tekstu */
    gap: 0.6rem;
    /* odstęp między ikonką a napisem */
    width: 100%;
    padding: 0.75rem 1.5rem;
    text-decoration: none;
    font-weight: 600;
    font-size: 0.95rem;
    color: var(--primary);
    text-align: left;
    box-sizing: border-box; 
  }
    /* Ikonka po lewej w linku sidebaru */
    .sidebar-nav .sidebar-icon {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      flex: 0 0 auto;
      /* ikona ma stałą szerokość, nie rozciąga się */
    }
  
    /* Rozmiar samego SVG z Lucide (po createIcons) */
    .sidebar-nav .sidebar-icon svg {
      width: 18px;
      height: 18px;
    }
  
    /* Tekst – wypełnia resztę szerokości linku */
    .sidebar-nav .sidebar-label {
      flex: 1 1 auto;
    }

  .sidebar-nav a:hover,
  .sidebar-nav a:focus-visible {
    background: var(--secondary);
    color: #fff;
    outline: none;
  }

  /* Podświetlenie aktualnej podstrony (jeśli na linku ustawisz aria-current="page") */
  .sidebar-nav a[aria-current="page"] {
    background: var(--secondary);
    color: #fff;
  }

  /* Stan „wyłączony” – obsługiwany przez custom-fixes.js */
  .sidebar-nav a[disabled],
  .sidebar-nav a[aria-disabled="true"] {
    color: #9eb8bb;
    cursor: default;
  }

  .sidebar-nav a[disabled]:hover,
  .sidebar-nav a[aria-disabled="true"]:hover {
    background: transparent;
    color: #9eb8bb;
  }

  /* -----------------------------------------------------------------
   * Mini summary styles
   *
   * The mini summary appears at the top of the sidebar when all menu
   * items have scrolled out of view.  It provides quick access to basic
   * personal data.  We use sticky positioning so that the summary stays
   * fixed within the sidebar as the page scrolls.  The summary shares
   * colours and typography with the rest of the application.  Each row
   * is separated by a small gap for readability.  Percentile labels
   * inherit the muted style from the global `.muted` class.
   */
  .mini-summary {
    /* Hidden by default; shown via JS */
    display: none;
    position: sticky;
    top: 0;
    left: 0;
    z-index: 5;
    padding: 0.75rem 0.5rem;
    /* Use a neutral border colour consistent with cards */
    border-top: 1px solid #d0dede;
    background: var(--card);
    font-size: 0.9rem;
    line-height: 1.35;
  }
  .mini-summary .ms-row + .ms-row {
    margin-top: 0.35rem;
  }
  .mini-summary .result-val {
    font-weight: 600;
    font-size: 1rem;
  }

  /*
   * Shortcuts section below the mini summary.  Provides an interface
   * for adding quick links to cards on the page and displays up to
   * three shortcuts.  Each shortcut row contains a link to scroll to
   * the target card and a remove button.  The Add Shortcut button
   * displays a drop‑down when clicked.  Layout and spacing mirror
   * other sidebar elements.
   */
  .mini-summary .mini-shortcuts {
    margin-top: 0.6rem;
    border-top: 1px solid #d0dede;
    padding-top: 0.6rem;
    font-size: 0.9rem;
    line-height: 1.35;
  }
  .mini-summary .shortcut-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
    /* Increase vertical spacing between shortcut rows */
    margin-top: 0.5rem;
  /* Force pointer events on the row.  Without this, some global styles from
     ios26-v2.css may disable pointer events on flex containers, preventing
     click handlers attached to the row from firing. */
  pointer-events: auto !important;
  }
  .mini-summary .shortcut-row:first-child {
    margin-top: 0;
  }
  /* Style the shortcut link like a pill with ample padding.  We use
     !important on several properties to override more generic rules in
     ios26-v2.css, which apply to all buttons.  Adding padding and
     border-radius creates a larger “otoczka” around the label so that
     the text does not touch the edges. */
  .mini-summary .shortcut-link {
    background: var(--card) !important;
    border: 1px solid #d0dede !important;
    border-radius: var(--radius) !important;
    /* Use black text for added shortcut links to match the dropdown options. */
    color: #000 !important;
    text-decoration: none !important;
    cursor: pointer;
    padding: 0.25rem 0.6rem !important;
    font-size: 0.9rem;
    flex-grow: 1;
    text-align: left;
    display: inline-flex;
    align-items: center;
  }

  /* Style for disabled shortcuts (e.g. WFL when age > 2 years).  Use a
     muted colour and disable pointer interactions to convey that the
     link is not actionable.  The tooltip is provided via the title
     attribute in JS. */
  .mini-summary .shortcut-link.disabled-shortcut {
    color: #9eb8bb !important;
    background: var(--card) !important;
    border-color: #d0dede !important;
    cursor: default !important;
    text-decoration: none !important;
    /* Allow pointer interactions so that the native title tooltip appears
       when hovering.  Without this explicit override, some global styles
       may disable pointer events on certain buttons, preventing the
       tooltip from being displayed. */
    pointer-events: auto !important;
  }

  /* When a shortcut is disabled the row itself may also carry a title
     attribute for tooltips.  Ensure the row allows pointer events so
     that hovering over the area triggers the tooltip. */
  .mini-summary .shortcut-row[title] {
    pointer-events: auto !important;
  }
  .mini-summary .shortcut-link.disabled-shortcut:hover {
    color: #9eb8bb !important;
    background: var(--card) !important;
  }
  /* Ensure the remove (×) icon is clearly red and spaced away from the label.
     We use !important to override Liquid Glass styles that reset button
     colours. */
  .mini-summary .shortcut-remove {
    background: none !important;
    border: none !important;
    color: var(--danger) !important;
    cursor: pointer;
    margin-left: 0.5rem;
    padding: 0;
    font-size: 1.1rem;
    line-height: 1;
    /* Allow pointer events explicitly; some global button styles may
       disable pointer events on certain buttons which would prevent
       the click handler from firing. */
    pointer-events: auto !important;
  }
  /*
   * Style the “Dodaj skrót” button to visually match the shortcut
   * labels.  Use the same pill‑like appearance with a neutral
   * background, border and radius.  Set the padding to provide a
   * generous clickable area and make the button full‑width so it
   * aligns with the list of shortcuts.  Remove underline and set
   * colour to the primary hue.  Use !important overrides to ensure
   * these styles take precedence over rules defined in ios26‑v2.css.
   */
  .mini-summary .add-shortcut-btn {
    background: var(--card) !important;
    border: 1px solid #d0dede !important;
    border-radius: var(--radius) !important;
    color: var(--primary) !important;
    text-decoration: none !important;
    cursor: pointer;
    padding: 0.25rem 0.6rem !important;
    font-size: 0.9rem;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    margin-top: 0.5rem;
    /* Force pointer events on the add button.  Without this some global
       styles (e.g. in ios26-v2.css) may disable pointer events on
       buttons, preventing the click handler from firing. */
    pointer-events: auto !important;
  }

  /*
   * Informational text displayed above the list of shortcuts.  Use a
   * muted colour and smaller font to differentiate it from action
   * elements.  Provide some vertical spacing so it does not crowd the
   * surrounding controls.
   */
  .mini-summary .shortcut-info {
    font-size: 0.8rem;
    color: #6c757d;
    margin-bottom: 0.25rem;
  }
  .mini-summary #shortcutSelect {
    /* Add a margin so the dropdown is separated from preceding content */
    margin-top: 0.5rem;
    width: 100%;
    font-size: 0.9rem;
    background: var(--card);
    border: 1px solid #d0dede;
    border-radius: var(--radius);
    color: var(--text);
    padding: 0.25rem 0.6rem;
    /* Ensure pointer events are enabled so the user can interact with
       the dropdown even if global styles disable pointer events on
       form controls. */
    pointer-events: auto !important;
  }

  /*
   * Dropdown and option styling for the custom shortcut list on the
   * kidney clearance calculator page.  Instead of using a native
   * <select> element (which may be hidden by global CSS), we render
   * a clickable list of options.  The dropdown uses the same card
   * background, border and shadow as the other elements in the
   * sidebar.  Each option within the list has padding and a bottom
   * border, and highlights on hover.  A special cancel option is
   * coloured red to indicate its function.  Pointer events are
   * explicitly enabled to override any global styles that might
   * disable interaction.
   */
  .mini-summary .shortcut-dropdown {
    margin-top: 0.5rem;
    width: 100%;
    /* Use a solid white background for the shortcut dropdown and disable
       any glassy blur effects.  Without these overrides the Liquid Glass
       theme applies a semi‑transparent backdrop with blur, making the
       list difficult to read.  The !important flag ensures these
       properties prevail over later declarations in theme styles. */
    background: #ffffff !important;
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
    border: 1px solid #d0dede;
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    /* Increase the maximum height so more options are visible at once.  A taller
       dropdown reduces the need to scroll and makes the list feel less
       cramped. */
    /* Make the dropdown taller so that more items are visible without scrolling.
       A larger max-height reduces the need to scroll and gives a more relaxed
       feel when browsing a long list of options. */
    max-height: 24rem !important;
    overflow-y: auto;
    pointer-events: auto !important;
  }
  .mini-summary .shortcut-option {
    /* Increase vertical padding to create more space between options.  This
       makes the list easier to scan and prevents labels from feeling
       cramped. */
    /* Increase vertical and horizontal padding to create a larger hit area and
       more breathing room around each option.  This makes the list feel less
       cramped and improves readability, especially for multi-line labels. */
    padding: 0.7rem 1.2rem !important;
    cursor: pointer;
    /* Use black text for dropdown options so they remain easily
       readable against the white background, regardless of the
       current theme. */
    color: #000 !important;
    font-size: 0.9rem;
    border-bottom: 1px solid #e0eae6;
    pointer-events: auto !important;
    /* Allow long titles to wrap instead of being truncated.  The
       word-break setting forces wrapping on long strings without spaces. */
    white-space: normal !important;
    word-break: break-word !important;
    /* Ensure long text wraps and is fully visible.  Override any
       potential overflow clipping or ellipsis from upstream styles. */
    overflow-wrap: anywhere !important;
    text-overflow: unset !important;
    overflow: visible !important;
    /* Increase line-height to separate lines within multi-line labels. */
    line-height: 1.4 !important;
  }
  .mini-summary .shortcut-option:last-child {
    border-bottom: none;
  }
  .mini-summary .shortcut-option:hover {
    background: #eef5f5;
  }
  .mini-summary .cancel-option {
    /* Ensure the cancel option remains coloured in the danger colour even
       when general option colours are overridden.  Without the
       !important flag, the inherited black from .shortcut-option would
       override this colour. */
    color: var(--danger) !important;
  }

  /* -----------------------------------------------------------------
   * Steroid shortcuts section (steroidy.html)
   *
   * On the steroid conversion calculator page, a fixed section
   * appears below the sidebar menu.  It allows the user to define up to
   * three steroid conversion pairs (source → target) and store them
   * locally.  These shortcuts remain visible at all times (not
   * dependent on scroll) and mirror the visual language of the
   * mini‑summary shortcuts.  The section consists of an informational
   * notice, a list of existing shortcuts and a button to add a new
   * pair.  A custom pair‑selection panel (the steroid dropdown) is
   * shown when adding a shortcut.
   */
  .steroid-summary {
    /* Space above the steroid section to separate it from the last menu item */
    margin-top: 0.6rem;
    border-top: 1px solid #d0dede;
    padding: 0.75rem 0.5rem;
    background: var(--card);
    font-size: 0.9rem;
    line-height: 1.35;
  }
  .steroid-summary .shortcut-info {
    font-size: 0.8rem;
    color: #6c757d;
    margin-bottom: 0.4rem;
  }
  .steroid-summary .steroid-shortcuts {
    margin: 0;
    padding: 0;
  }
  .steroid-summary .shortcut-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-top: 0.5rem;
    pointer-events: auto !important;
  }
  .steroid-summary .shortcut-row:first-child {
    margin-top: 0;
  }
  .steroid-summary .shortcut-link {
    background: var(--card) !important;
    border: 1px solid #d0dede !important;
    border-radius: var(--radius) !important;
    color: #000 !important;
    text-decoration: none !important;
    cursor: pointer;
    padding: 0.25rem 0.6rem !important;
    font-size: 0.9rem;
    flex-grow: 1;
    text-align: left;
    display: inline-flex;
    align-items: center;
  }
  .steroid-summary .shortcut-remove {
    background: none !important;
    border: none !important;
    color: var(--danger) !important;
    cursor: pointer;
    margin-left: 0.5rem;
    padding: 0;
    font-size: 1.1rem;
    line-height: 1;
    pointer-events: auto !important;
  }
  .steroid-summary .add-shortcut-btn {
    background: var(--card) !important;
    border: 1px solid #d0dede !important;
    border-radius: var(--radius) !important;
    color: var(--primary) !important;
    text-decoration: none !important;
    cursor: pointer;
    padding: 0.25rem 0.6rem !important;
    font-size: 0.9rem;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    margin-top: 0.5rem;
    pointer-events: auto !important;
  }
  .steroid-summary .steroid-dropdown {
    margin-top: 0.5rem;
    width: 100%;
    background: #ffffff !important;
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
    border: 1px solid #d0dede;
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    padding: 0.8rem;
    pointer-events: auto !important;
  }
  .steroid-summary .pair-row {
    display: flex;
    flex-direction: column;
    margin-bottom: 0.8rem;
  }
  .steroid-summary .pair-row:last-child {
    margin-bottom: 0;
  }
  .steroid-summary .pair-row label {
    font-weight: 600;
    margin-bottom: 0.25rem;
    font-size: 0.9rem;
  }
  .steroid-summary .pair-row select {
    width: 100%;
    font-size: 0.9rem;
    color: var(--text);
    background: var(--card);
    border: 1px solid #d0dede;
    border-radius: var(--radius);
    padding: 0.25rem 0.6rem;
    pointer-events: auto !important;
  }

  /* Hide the add button for steroid shortcuts when the maximum number
     of shortcuts has been reached.  This class is applied via
     JavaScript (renderSteroidShortcuts).  The !important is
     necessary to override other theme-specific display rules. */
  .steroid-summary .hidden-shortcut-add-btn {
    display: none !important;
  }
  .steroid-summary .pair-actions {
    display: flex;
    justify-content: space-between;
    margin-top: 0.6rem;
  }
  .steroid-summary .confirm-pair {
    background: var(--primary);
    color: #fff;
    border: none;
    border-radius: var(--radius);
    padding: 0.4rem 1rem;
    font-size: 0.9rem;
    cursor: pointer;
  }
  .steroid-summary .cancel-pair {
    background: var(--danger);
    color: #fff;
    border: none;
    border-radius: var(--radius);
    padding: 0.4rem 1rem;
    font-size: 0.9rem;
    cursor: pointer;
  }
  /* When steroid shortcuts are moved into the mini summary (which appears at
     the top of the sidebar when the navigation scrolls out of view), the
     nested steroid container inherits both its own horizontal padding and
     the padding from the mini summary.  This double padding leaves too
     little space for the shortcut rows, causing the labels and remove
     buttons to appear squished and the red “×” icons to overflow.  To
     address this, remove the left and right padding and margins when the
     steroid summary sits inside the mini summary and allow it to occupy
     the full available width.  We also ensure the rows do not wrap and
     that the shortcut links can grow to fill the remaining space. */
  .mini-summary .steroid-summary {
    padding-left: 0;
    padding-right: 0;
    margin-left: 0;
    margin-right: 0;
    width: 100%;
  }
  .mini-summary .steroid-summary .shortcut-row {
    flex-wrap: nowrap;
  }
  .mini-summary .steroid-summary .shortcut-link {
    flex-grow: 1;
  }
}
/* Aktywna pozycja w bocznym menu */
.sidebar-nav a.is-active .sidebar-label,
.sidebar-nav a[aria-current="page"] .sidebar-label {
  font-weight: 700;
  text-decoration: underline;
  text-underline-offset: 0.18em;
}

/*
 * Decorative right sidebar
 *
 * On very wide monitors the application layout can feel stretched.  To
 * visually balance the page and frame the main content, an empty sidebar
 * element (<aside class="decor-sidebar">) is inserted into each
 * .desktop-layout.  By default the element is hidden; it becomes
 * visible only on screens wider than 1400px.  The right column shares
 * the same background colour, border radius and shadow as the left
 * navigation sidebar but contains no interactive content.  When shown,
 * the grid layout expands to three columns (left sidebar, main content,
 * decorative sidebar).
 */

/* Hide the decorative sidebar by default */
.decor-sidebar {
  display: none;
}

@media (min-width: 1400px) {
  /* Add a third column to the desktop grid on very wide screens */
  .desktop-layout {
    grid-template-columns: 230px 1fr 230px;
  }
  /* Show and style the decorative sidebar */
  .decor-sidebar {
    display: block;
    background: var(--card);
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    padding: 1rem 0;
    height: 100%;
  }

  /* When steroid shortcuts are placed in the right sidebar, allow the
     container to utilise most of the sidebar width.  Reduce both the
     outer margin and the inner padding compared to the default
     steroid-summary so that the card nearly fills the available
     space without touching the edges.  These overrides apply only
     when the decorative sidebar is visible (≥1400px). */
  .decor-sidebar .steroid-summary {
    /* Small outer margins: vertical and horizontal */
    margin: 0.5rem 0.25rem;
    /* Reduce horizontal padding to maximise usable width */
    padding: 0.5rem;
  }
}